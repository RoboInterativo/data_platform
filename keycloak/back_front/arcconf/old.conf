# location = /_validate_token {
#     internal;
#     proxy_pass http://127.0.0.1:8080/realms/master/protocol/openid-connect/token/introspect;
#
#     # –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–¥–∞—á—É —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
#     proxy_pass_request_body on;
#
#     # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏
#     proxy_set_header Content-Type "application/x-www-form-urlencoded";
#     proxy_set_header Content-Length "";
#
#     # –í–∞—Ä–∏–∞–Ω—Ç 1: –¢–æ–ª—å–∫–æ Basic Auth (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
#     proxy_set_header Authorization "Basic bXljbGllbnQ6OW52N1BVQk55cjNUQjlGcHdqTzFnUGJNMnJEQTBFTEY=";
#     proxy_set_body "token=$http_authorization";
#
#     # –ò–õ–ò –í–∞—Ä–∏–∞–Ω—Ç 2: –¢–æ–ª—å–∫–æ client_secret –≤ —Ç–µ–ª–µ
#     # proxy_set_body "token=$http_authorization&client_id=myclient&client_secret=9nv7PUBNyr3TB9FpwjO1gPbM2rDA0ELF";
#
#     proxy_method POST;
#
#     # –í–∫–ª—é—á–∞–µ–º –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
#     access_log /var/log/nginx/validate_access.log main;
#     error_log /var/log/nginx/validate_error.log notice;
#
#     # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
#     proxy_set_header X-Original-URI $request_uri;
#     proxy_set_header X-Original-Method $request_method;
# }
# üî• –õ–æ–∫–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞ (auth_request)
    # location = /_validate_token {
    #     internal;  # –¢–æ–ª—å–∫–æ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    #     proxy_pass http://127.0.0.1:8080/realms/master/protocol/openid-connect/token/introspect;
    #     proxy_pass_request_body on;
    #     proxy_set_header Content-Type "application/x-www-form-urlencoded";
    #     proxy_set_header Authorization "";  # –û—á–∏—â–∞–µ–º, —á—Ç–æ–±—ã Keycloak –Ω–µ –≤–∏–¥–µ–ª –∑–∞–≥–æ–ª–æ–≤–æ–∫
    #
    #     # –ü–µ—Ä–µ–¥–∞—ë–º client_id –∏ client_secret (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
    #     proxy_set_header Content-Length "";
    #     proxy_method POST;
    #     proxy_set_body "token=$http_authorization&client_id=myclient&client_secret=rNEoR0SaH6ImZGEwfqEY4zVqocs58gMW";
    # }
    # location = /_validate_token {
    #     internal;
    #     proxy_pass http://127.0.0.1:8080/realms/master/protocol/openid-connect/token/introspect;
    #
    #     proxy_pass_request_body on;
    #     proxy_set_header Content-Type "application/x-www-form-urlencoded";
    #     proxy_set_header Authorization ""; # –í–∞–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å!
    #
    #     # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ —Å –±–∞–∑–æ–≤–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
    #     proxy_set_body "token=$http_authorization";
    #     proxy_set_header Authorization "Basic bXljbGllbnQ6djdQVUJOeXIzVEI5RnB3ak8xZ1BiTTJyREEwRUxG";
    #
    #     proxy_method POST;
    # }

# location = /_validate_token {
#     internal;
#     proxy_pass http://127.0.0.1:8080/realms/master/protocol/openid-connect/token/introspect;
#
#     proxy_pass_request_body on;
#     proxy_set_header Content-Type "application/x-www-form-urlencoded";
#     proxy_set_header Content-Length "";
#
#     # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π base64
#     proxy_set_header Authorization "Basic bXljbGllbnQ6OW52N1BVQk55cjNUQjlGcHdqTzFnUGJNMnJEQTBFTEY=";
#
#     # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
#     proxy_set_body "token=$http_authorization&client_id=myclient&client_secret=9nv7PUBNyr3TB9FpwjO1gPbM2rDA0ELF";
#     proxy_method POST;
#
#     # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
#     access_log /var/log/nginx/keycloak_access.log;
#     error_log /var/log/nginx/keycloak_error.log debug;
# }
    # location = /_validate_token {
    #     internal;
    #     proxy_pass http://127.0.0.1:8080/realms/master/protocol/openid-connect/token/introspect;
    #
    #     proxy_pass_request_body on;
    #     proxy_set_header Content-Type "application/x-www-form-urlencoded";
    #     proxy_set_header Content-Length "";
    #     proxy_set_header Authorization "Basic bXljbGllbnQ6OW52N1BVQk55cjNUQjlGcHdqTzFnUGJNMnJEQTBFTEY=";
    #
    #     proxy_set_body "token=$http_authorization";
    #     proxy_method POST;
    #
    #     access_log /var/log/nginx/validate_token.log;
    #     error_log /var/log/nginx/validate_token_error.log debug;
    # }
